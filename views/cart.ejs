<%- include('partials/header') %>

<div style="position: relative; width: 100vw; margin-left: calc(-50vw + 50%); margin-top: -1.5rem; margin-bottom: 0; padding: 3rem 0; background-image: url('/images/aboutBg.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; min-height: calc(100vh - 150px);">
  <div class="container" style="padding: 0 15px;">
    <div style="background-color: rgba(255, 255, 255, 0.65); padding: 2rem; border-radius: 0.5rem;">
      <h2 class="mb-4">Shopping Cart</h2>
      <% if (cart && cart.length > 0) { %>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Item</th>
              <th>Quantity</th>
              <th>Price per Item</th>
              <th>Subtotal</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <% 
            let total = 0;
            cart.forEach(item => { 
              const subtotal = item.price * (item.quantity || 1);
              total += subtotal;
            %>
              <tr>
                <td>
                  <div class="d-flex align-items-center">
                    <img src="<%= item.image || '/images/pizza.jpg' %>" alt="<%= item.name %>" class="me-3" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px;">
                    <span><%= item.name %></span>
                  </div>
                </td>
                <td><%= item.quantity || 1 %></td>
                <td>₹<%= item.price %></td>
                <td>₹<%= subtotal %></td>
                <td>
                  <form action="/cart/remove/<%= item.course_id %>" method="POST" style="display: inline;">
                    <button type="submit" class="btn btn-danger btn-sm">Remove</button>
                  </form>
                </td>
              </tr>
            <% }) %>
          </tbody>
          <tfoot>
            <tr>
              <th colspan="3">Total</th>
              <th>₹<%= total %></th>
              <th></th>
            </tr>
          </tfoot>
        </table>
      <% } else { %>
        <div class="alert alert-info">
          <p>Your cart is empty. <a href="/">Continue shopping</a></p>
        </div>
      <% } %>
    </div>
  </div>
</div>

<%- include('partials/footer') %>

